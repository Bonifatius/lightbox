!function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t,a){var i=this;this.elements=t,this.padding=null!=a?a:16,this.click=e(this.click,this),this.elements.attr("data-lighbox","true"),this.elements.click(this.click),this.background=$('<div class="lightbox-background"></div>').appendTo($("body")),this.background.click(function(){return i.collapse(!0)}),$(window).resize(function(){return i.collapse(!1)}),$(window).keyup(function(){return 27===event.keyCode?i.collapse(!0):void 0})}return t.prototype.maximize=function(t){var e,a,i,n,o,r,s,d,l,h;return i=t.width(),e=t.height(),a=i/e,h=$(window).width()-2*this.padding,d=$(window).height()-2*this.padding,0/0!==Number(t.attr("data-max-width"))&&(h=Math.min(h,Number(t.attr("data-max-width")))),0/0!==Number(t.attr("data-max-height"))&&(d=Math.min(d,Number(t.attr("data-max-height")))),l=h/d,l>a?h=Math.round(d*a):d=Math.round(h/a),n=h/i,o=d/e,r=Math.round($(window).scrollLeft()+.5*$(window).width()-t.offset().left-.5*i)-.5*((i+h)%2),s=Math.round($(window).scrollTop()+.5*$(window).height()-t.offset().top-.5*e)-.5*((e+d)%2),this.clear(),t.addClass("lightbox-opened"),0===t.parent("div.asset").length?t.css("z-index",1):t.parent("div.asset").css("z-index",1),this.load(t),this.background.addClass("lightbox-background-show"),this.zoom(t,"translate("+r+"px, "+s+"px) scale("+n+", "+o+")")},t.prototype.minimize=function(t){var e=this;return t.removeClass("lightbox-opened"),this.background.removeClass("lightbox-background-show"),this.background.addClass("lightbox-background-close"),setTimeout(function(){return e.background.removeClass("lightbox-background-close")},250),this.zoom(t,"translate(0, 0) scale(1, 1)")},t.prototype.zoom=function(t,e){return t.css({"-webkit-transform":e,"-moz-transform":e,transform:e})},t.prototype.click=function(t){var e;return e=$(t.target),e.addClass("lightbox-animate"),e.hasClass("lightbox-opened")?this.minimize(e):this.maximize(e)},t.prototype.clear=function(){var t,e,a,i,n;for(i=this.elements,n=[],e=0,a=i.length;a>e;e++)t=i[e],t=$(t),0===t.parent("div.asset").length?n.push(t.css("z-index","auto")):n.push(t.parent("div.asset").css("z-index","auto"));return n},t.prototype.collapse=function(t){var e,a,i,n,o;for(null==t&&(t=!1),n=this.elements,o=[],a=0,i=n.length;i>a;a++)e=n[a],e=$(e),e.hasClass("lightbox-opened")?(t||e.removeClass("lightbox-animate"),o.push(this.minimize(e))):o.push(void 0);return o},t.prototype.load=function(t){return t.attr("data-image-large")&&!t.attr("data-image-large-replaced")?(t.css("background-image","url('"+t.attr("src")+"')"),t.load(function(){return $(this).css("background-image","none")}),t.attr("src",t.attr("data-image-large")),t.attr("data-image-large-replaced","true")):void 0},t}(),$(function(){return Modernizr.csstransforms?new t($("img")):void 0})}.call(this);